### Lets Dive Deep into Behind The Scenes

### Rendering Phase
**The Trees: Current and Work-in-Progress**

**The Current Tree:** At any given time, the current tree is the Fiber tree that represents the UI currently on the screen. It is a synchronized copy of the real DOM.

**Building the WorkInProgress Tree:** When an update is triggered, React begins building a new Fiber tree in memory, called the workInProgress tree. It starts at the root and traverses down. 

For each node in the old tree, it decides what to do:
- Reuse Existing Fiber: If the type and key of the new React element match the old fiber's
- Create New Fiber: if type or key of the element has changed
- Remove Existing Fiber: If an element from the old tree no longer exists in the new tree


**The Diffing Algorithm:** The diffing logic is integral to the workInProgress tree's construction. It's the set of rules that governs whether an old fiber is reused, created, or removed, ensuring that only the necessary changes are made.

Along with the construction of workInProgress Tree fiber reconciler add the changes into a singly-Linked list called **Effect List**

The effect list is a high-performance data structure used to collect and organize all the "side effects" that need to be applied to the real DOM. Instead of a simple array, it's a singly-linked list because this makes it very efficient to add new items (fibers with effects) and to iterate through the list later during the commit phase.

**How and When It's Created**
The effect list is collected incrementally during the render phase.

As the Fiber reconciler traverses the component tree and builds the work-in-progress Fiber tree, it identifies any fibers that need to cause a side effect. A side effect is anything that needs to interact with the outside world, like:

Adding a new DOM node.

Removing a DOM node.

Updating a DOM node's props or attributes.

Calling a lifecycle method like componentDidMount.


**The End Products of the Render Phase**
1. The complete work-in-progress Fiber tree, which serves as the final blueprint for the UI.

2. The effect list, which is a prioritized checklist of all the nodes that need to be touched in the real DOM.

**Commit Phase:** The commit phase takes the effect list as its primary input.

1. Iterates the Effect List: React starts at the beginning of the effect list and iterates through it, one fiber at a time.

2. Applies Changes: For each fiber in the list, React performs the specific DOM operations it was marked for. This can include inserting new elements, deleting old ones, or updating existing ones.

3. Executes Lifecycle Methods: It also executes any lifecycle methods or hooks associated with that fiber (e.g., useEffect, useLayoutEffect, componentDidMount, componentDidUpdate).

4. Updates Real DOM: By the end of this phase, all the changes have been applied, and the real DOM is now fully synchronized with the new state of the application. The UI is updated on the screen, and the process is complete.

5. Mark the work-in-progress Fiber tree as the new current tree.



